## Технический долг. Устранение долга

### 1. Инспекция проекта на наличие технического долга
Таблица 1 — Оценка признаков технического долга
| Признак технического долга | Наличие | Пример / Пояснение |
|----------------------------|---------|---------------------|
| Непонятный / нечитабельный код | Да | Некоторые классы содержат неприлично большое количество строк |
| Дублирующийся код | Да | Валидация email повторяется в 2 разных местах, вместо единого метода |
| Отсутствие автоматизации (тесты, сборка, деплой) | Да | Нет unit-тестов |
| Запутанная архитектура и ненужные сложные зависимости | Да | Контроллер напрямую обращается к БД, минуя сервисный слой |
| Медленные / неэффективные средства | Да | Запрос к БД без индексов, загрузка всех данных в память. |
| Незакоммиченный код / долгоживущие ветки | Нет | --------------------- |
| Отсутствие / несоответствие технической документации | Да | API не описано, схемы не обновлялись с начала проекта. |
| Отсутствие тестовой среды | Да | Тестирование идёт только на машинах разработчиков (локально) |
| Длинные циклы интеграции / Отсутствие непрерывной интеграции | Да | Интеграция раз в 1/2 недели, ручное тестирование перед релизом. |

Проект находится в зоне высокого технического долга. Особенно критичны: отсутствие тестов, дублирование кода и непрозрачная архитектура. 
Это замедляет добавление новых фич и повышает риск ошибок.

### 2. План мероприятий по устранению технического долга
Таблица 2 — План мероприятий
| Мероприятие | Цель | Трудозатраты (чел.-ч) |
|-------------|------|-------------------------|
| Написать модульные тесты для ключевых модулей (авторизация, регистрация) | Повысить надёжность, разрешить рефакторинг | 8 |
| Выделить повторяющийся код в утилитарные методы и классы | Устранить дублирование | 4 |
| Настроить CI/CD (GitHub Actions): автоматическая сборка и запуск тестов при пуше | Обеспечить быструю обратную связь | 3 |
| Рефакторинг архитектуры: выделить сервисный слой, убрать прямые запросы из контроллера | Снизить связанность | 6 |
| Добавить индексы в БД для часто используемых полей | Ускорить запросы | 2 |
| Обновить README и нарисовать актуальную схему компонентов | Улучшить документацию | 2 |
| Развернуть тестовую среду (staging) | Изолировать тестирование от продакшна | 3 |

Итого - 28 часов 

### 3. Оценка плана мероприятий
Общая трудоёмкость: 28 человеко-часов

Срок исполнения: 1 неделя (на трех разработчиков)

Риски:
- Рефакторинг может сломать логику
  
Ожидаемый результат:
- Снижение времени на добавление новой фичи на 20–30%
- Уменьшение количества багов при релизах

### 4. Сравнение объёма долга и недоимплементированных фич
В коммерческой разработке всегда есть ограничение по времени и ресурсам. Невозможно делать всё сразу. Поэтому нужно принять взвешенное решение:
- Если долг больше, чем объём оставшихся фич, — проект рискует стать неподдерживаемым, лучше остановить разработку новых функций и заняться рефакторингом.
- Если фич значительно больше, чем долг, — можно параллельно доделывать фичи и понемногу гасить долг (например, 80% времени на фичи, 20% на рефакторинг).
- Если объёмы сопоставимы, требуется баланс — например, чередовать спринты: один спринт фичи, следующий — гашение долга.

| Категория | Объём (чел.-ч) | Объём (Story Points)* |
|-----------|----------------|------------------------|
| Технический долг | 28 | 9,3 |
| Нереализованные фичи | 30 | 10 |

\* *Пересчёт: 1 Story Point ≈ 3 человеко-часа.*

<img width="477" height="330" alt="Диаграмма без названия drawio" src="https://github.com/user-attachments/assets/c9e3a26b-78ea-4153-b0b8-f9f16d4bdb8a" />

Анализ:
- Если не гасить долг, каждая новая фича будет стоить дороже (из-за сложности внесения изменений в запутанный код).
- При текущем темпе разработки через 1 спринт долг может превысить объём новых фич, что сделает проект трудносопровождаемым.

### 5. Выводы и коррективы в план разработки
Выводы:
- Технический долг в проекте реально тормозит разработку.
- Без его устранения невозможно гарантировать стабильность и предсказуемость сроков.
- Часть долга возникла из-за спешки и отсутствия автоматизации.

Обоснование необходимости устранения долга:
- Как мы хотим: код чистый, есть тесты, CI, staging, документация.
- Текущее состояние — всё делается вручную, архитектура запутана.
- Чтобы перейти из «как бывает» в «текущее состояние», необходимо реализовать предложенный план.

Коррективы в план разработки проекта:
- Выделить один спринт (или его часть) на устранение технического долга
- Ввести Definition of Done (DoD), включающий:
наличие автоматических тестов;
отсутствие дублирования (проверка линтером);
успешный проход CI;
актуальность документации.

Включить в каждый спринт мини-рефакторинг — не менее 10% времени на улучшение кода.




